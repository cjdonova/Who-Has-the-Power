<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Who Has the Power? - Constitutional Card Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 2em;
    }
    #game {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #bbb;
      padding: 2em;
    }
    button {
      margin: 0.5em;
      padding: 0.7em 1.3em;
      font-size: 1em;
      border-radius: 5px;
      border: 1px solid #008cba;
      background: #008cba;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #005f5f;
    }
    textarea {
      width: 100%;
      font-size: 1em;
      margin-bottom: 1em;
    }
    #winner-text {
      color: #008cba;
      margin-bottom: 1em;
    }
    #answer-explanation {
      background: #f0f8ff;
      border-radius: 6px;
      padding: 1em;
      margin-top: 1em;
      color: #333;
      font-size: 1em;
    }
    footer {
      text-align: center;
      margin-top: 2em;
      color: #555;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h1>Who Has the Power?</h1>
  <div id="game">
    <div id="role-selection">
      <h2>Choose Your Role</h2>
      <button onclick="setRole('Federal')">Federal</button>
      <button onclick="setRole('State')">State</button>
      <button onclick="setRole('Local')">Local</button>
    </div>
    <div id="scenario" style="display:none;">
      <h2>Scenario:</h2>
      <p id="scenario-text"></p>
      <h3>Your Power Cards:</h3>
      <div id="power-cards"></div>
      <h3>Your Argument:</h3>
      <textarea id="argument" rows="3" cols="40" placeholder="Enter your constitutional argument here..."></textarea>
      <button onclick="submitArgument()">Submit Argument</button>
    </div>
    <div id="vote" style="display:none;">
      <h2>Vote for the Winning Argument</h2>
      <div id="arguments"></div>
      <button onclick="nextRound()">Next Round</button>
    </div>
    <div id="winner" style="display:none;">
      <h2 id="winner-text"></h2>
      <div id="answer-explanation"></div>
      <button onclick="restartGame()">Play Again</button>
    </div>
  </div>
  <footer>
    <p>Created for public health & constitutional law learning. Host on GitHub Pages and embed in Canvas with an iframe!</p>
  </footer>
  <script>
    const scenarios = [
      {
        text: "Pandemic Crossing State Lines: The flu spreads rapidly from New York to New Jersey to Pennsylvania. Who has the constitutional authority to impose restrictions on interstate travel?",
        answer: "Federal government (Commerce Clause, Article I, Section 8). States can quarantine within their borders, but interstate commerce falls under federal power.",
        roles: ["Federal"]
      },
      {
        text: "Restaurant Inspection: A local restaurant fails a food safety inspection for contaminated meat. Who has the authority to shut it down?",
        answer: "State/local government (10th Amendment, police powers to regulate health and safety).",
        roles: ["State", "Local"]
      },
      {
        text: "Medicaid Expansion: Congress allocates money for states to expand Medicaid coverage. Who decides if the program is implemented in each state?",
        answer: "Both. Federal government sets funding and standards (Spending Clause). States choose whether to accept and implement (10th Amendment sovereignty).",
        roles: ["Federal", "State"]
      },
      {
        text: "Tobacco Regulation: Congress passes a law restricting cigarette sales near schools nationwide. A state argues it already has stricter local laws. Who has the final say?",
        answer: "Federal and state. Federal law (Commerce Clause) creates a minimum standard, but states can impose stricter rules under the 10th Amendment.",
        roles: ["Federal", "State"]
      },
      {
        text: "Environmental Regulation: A chemical spill in a river flows from one state into another, contaminating drinking water. Who regulates cleanup?",
        answer: "Federal government (Commerce Clause and general welfare spending power). States also act, but interstate pollution triggers federal authority (EPA, Clean Water Act).",
        roles: ["Federal", "State"]
      },
      {
        text: "Mandatory Vaccination in Schools: A school district requires students to be vaccinated before attending class. Parents sue, claiming this violates their rights. Who has authority?",
        answer: "State/local government (10th Amendment police powers). Backed by Supreme Court precedent (Jacobson v. Massachusetts, 1905).",
        roles: ["State", "Local"]
      },
      {
        text: "CDC Issues New Mask Guidance that Conflicts with State Policy: CDC recommends masks in schools; a state governor bans mask mandates. Who wins?",
        answer: "State government. Federal agencies issue guidance, but enforcement authority in schools comes from states (10th Amendment). Federal power could re-enter if interstate commerce or federal funding is tied to compliance.",
        roles: ["State"]
      },
      {
        text: "Research Funding Cuts: Congress reduces NIH funding for opioid research. What happens to state and local research programs?",
        answer: "Federal government controls funding (Spending Clause), but states may choose to fund programs independently.",
        roles: ["Federal", "State"]
      }
    ];

    const powerCards = {
      Federal: [
        "Commerce Clause (Art. I, Sec. 8)",
        "Taxing & Spending Clause (Art. I, Sec. 8)",
        "Necessary & Proper Clause (Art. I, Sec. 8)",
        "Supremacy Clause (Art. VI)"
      ],
      State: [
        "10th Amendment (Police Powers)",
        "State Sovereignty",
        "State Constitutions"
      ],
      Local: [
        "Local Emergency Powers",
        "Public Health Ordinance",
        "Community Health Mandate"
      ]
    };

    let currentRole = null;
    let currentScenario = null;
    let argumentsList = [];
    let scenarioIndex = 0;
    let selectedPowerCard = null;

    function setRole(role) {
      currentRole = role;
      document.getElementById('role-selection').style.display = 'none';
      document.getElementById('scenario').style.display = '';
      loadScenario();
      loadPowerCards();
    }

    function loadScenario() {
      currentScenario = scenarios[scenarioIndex % scenarios.length];
      document.getElementById('scenario-text').innerText = currentScenario.text;
    }

    function loadPowerCards() {
      const container = document.getElementById('power-cards');
      container.innerHTML = '';
      powerCards[currentRole].forEach(card => {
        const btn = document.createElement('button');
        btn.innerText = card;
        btn.onclick = () => selectPowerCard(card);
        container.appendChild(btn);
      });
    }

    function selectPowerCard(card) {
      selectedPowerCard = card;
      Array.from(document.getElementById('power-cards').children).forEach(btn => {
        btn.style.background = btn.innerText === card ? "#005f5f" : "#008cba";
      });
    }

    function submitArgument() {
      const argText = document.getElementById('argument').value.trim();
      if (!selectedPowerCard || !argText) {
        alert("Please select a power card and enter your argument.");
        return;
      }
      argumentsList.push({role: currentRole, card: selectedPowerCard, argument: argText});
      showVote();
    }

    function showVote() {
      document.getElementById('scenario').style.display = 'none';
      document.getElementById('vote').style.display = '';
      const container = document.getElementById('arguments');
      container.innerHTML = '';
      argumentsList.forEach((entry, idx) => {
        const div = document.createElement('div');
        div.style.marginBottom = "1em";
        div.innerHTML = `<strong>${entry.role} (${entry.card}):</strong><br>${entry.argument}`;
        const voteBtn = document.createElement('button');
        voteBtn.innerText = "Vote for this";
        voteBtn.onclick = () => declareWinner(idx);
        div.appendChild(voteBtn);
        container.appendChild(div);
      });
    }

    function declareWinner(idx) {
      document.getElementById('vote').style.display = 'none';
      document.getElementById('winner').style.display = '';
      document.getElementById('winner-text').innerText = `Winner: ${argumentsList[idx].role} â€” "${argumentsList[idx].card}"`;
      document.getElementById('answer-explanation').innerHTML =
        `<strong>Correct Answer & Explanation:</strong><br>${currentScenario.answer}`;
    }

    function nextRound() {
      scenarioIndex++;
      argumentsList = [];
      selectedPowerCard = null;
      document.getElementById('argument').value = '';
      document.getElementById('answer-explanation').innerHTML = '';
      document.getElementById('winner').style.display = 'none';
      document.getElementById('scenario').style.display = '';
      loadScenario();
      loadPowerCards();
    }

    function restartGame() {
      scenarioIndex = 0;
      argumentsList = [];
      selectedPowerCard = null;
      currentRole = null;
      document.getElementById('winner').style.display = 'none';
      document.getElementById('role-selection').style.display = '';
      document.getElementById('answer-explanation').innerHTML = '';
    }
  </script>
</body>
</html>
