<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Who Has the Power? — Constitutional Public Health Game</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 2em;
    }
    #game {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #bbb;
      padding: 2em;
    }
    button {
      margin: 0.5em;
      padding: 0.7em 1.3em;
      font-size: 1em;
      border-radius: 5px;
      border: 1px solid #008cba;
      background: #008cba;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover:enabled {
      background: #005f5f;
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .choice-btn.selected {
      background: #005f5f !important;
      color: #fff;
      border-color: #005f5f;
    }
    .scoreboard {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1em;
      gap: 1em;
    }
    .scorecard {
      border-radius: 8px;
      border: 1px solid #eee;
      padding: 1em 1.5em;
      background: #f0f8ff;
      min-width: 120px;
      text-align: center;
    }
    #scenario-card {
      margin-bottom: 1.5em;
      background: #f9f9f9;
      border-radius: 8px;
      padding: 1em 1.5em;
      border: 1px solid #eee;
    }
    #answer-explanation {
      background: #f0f8ff;
      border-radius: 6px;
      padding: 1em;
      margin-top: 1em;
      color: #333;
      font-size: 1em;
    }
    .clause-ref {
      margin-top: 2em;
      background: #fff;
      border-radius: 8px;
      border: 1px solid #eee;
      padding: 1em 1.5em;
    }
    .clause-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1em;
      margin-top: 1em;
    }
    .clause-item {
      background: #f6f8fa;
      border-radius: 6px;
      padding: 1em;
      border: 1px solid #e4eaf1;
      font-size: 0.97em;
    }
    @media (max-width: 600px) {
      #game { padding: 0.5em; }
      .clause-list { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <h1>Who Has the Power? — Constitutional Public Health</h1>
  <div id="game">
    <div class="scoreboard">
      <div class="scorecard">
        <div id="teamAname">Team A</div>
        <div>Score: <span id="scoreA">0</span></div>
      </div>
      <div class="scorecard">
        <div id="teamBname">Team B</div>
        <div>Score: <span id="scoreB">0</span></div>
      </div>
      <div class="scorecard">
        <div>Turn</div>
        <div id="turnDisplay">Team A</div>
      </div>
    </div>
    <div id="scenario-card">
      <div>
        <strong>Scenario <span id="cardNumber">1</span> / <span id="totalCards">10</span></strong>
      </div>
      <h3 id="scenarioPrompt"></h3>
      <div id="choices"></div>
      <div id="actionButtons" style="margin-top:1em;"></div>
      <div id="answer-explanation"></div>
    </div>
    <div id="gameEnd" style="display:none; text-align:center;">
      <h2 id="winnerText"></h2>
      <button onclick="restartGame()">Play Again</button>
    </div>
    <div class="clause-ref">
      <h3>Clause Reference</h3>
      <div class="clause-list" id="clauseList"></div>
    </div>
  </div>
  <script>
    const CLAUSES = [
      {
        title: "Article I, Section 8 — Commerce Clause",
        meaning: "Congress may regulate interstate commerce. Public‑health link: interstate disease control, FDA/OSHA/EPA national standards when activities affect commerce across states.",
      },
      {
        title: "Article I, Section 8 — Taxing & Spending (General Welfare)",
        meaning: "Congress raises revenue and spends for the general welfare. Public‑health link: Medicare, Medicaid, CDC/NIH funding and conditional grants to states.",
      },
      {
        title: "Article I, Section 8 — Necessary & Proper",
        meaning: "Congress may pass laws necessary to execute its enumerated powers. Public‑health link: creating/empowering federal health agencies and national reporting systems.",
      },
      {
        title: "10th Amendment — Reserved Powers / Police Powers",
        meaning: "Powers not delegated to the federal government are reserved to the states/people. Public‑health link: vaccination requirements, quarantine, inspections, local enforcement.",
      },
    ];
    const SCENARIOS = [
      {
        prompt: "A respiratory virus spreads from New York to New Jersey to Pennsylvania. Who can restrict interstate travel or issue national rules affecting state crossings?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 0,
        reasoning: "Federal (Commerce Clause). States can quarantine within borders, but interstate travel/commerce falls under federal authority.",
        cites: ["Article I, Section 8 — Commerce Clause"],
      },
      {
        prompt: "A local restaurant fails a food‑safety inspection; the health department orders it to close immediately. Who holds this authority?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 1,
        reasoning: "State/Local (10th Amendment police powers) cover restaurant inspections and local closures.",
        cites: ["10th Amendment — Reserved Powers / Police Powers"],
      },
      {
        prompt: "Congress funds Medicaid expansion and sets conditions. Who decides whether to implement the expansion in a given state?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 2,
        reasoning: "Both/Shared. Federal uses Spending power to fund and set conditions; states decide to accept and implement.",
        cites: [
          "Article I, Section 8 — Taxing & Spending (General Welfare)",
          "10th Amendment — Reserved Powers / Police Powers"
        ],
      },
      {
        prompt: "CDC issues school mask guidance; a state bans school mask mandates. Whose rule controls schools?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 1,
        reasoning: "State/Local. CDC guidance is nonbinding. States control school mandates absent federal law tying funding or commerce impact.",
        cites: ["10th Amendment — Reserved Powers / Police Powers"],
      },
      {
        prompt: "A river contamination crosses from State A into State B. Who regulates cleanup and standards?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 2,
        reasoning: "Both/Shared. Interstate pollution triggers federal authority (commerce/spending; e.g., EPA programs), while states enforce within borders.",
        cites: [
          "Article I, Section 8 — Commerce Clause",
          "Article I, Section 8 — Taxing & Spending (General Welfare)",
        ],
      },
      {
        prompt: "A school district requires student vaccinations; parents sue. Who holds authority to require vaccines for school entry?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 1,
        reasoning: "State/Local (police powers), supported by precedent (Jacobson v. Massachusetts).",
        cites: ["10th Amendment — Reserved Powers / Police Powers"],
      },
      {
        prompt: "Congress sets a national minimum age and distance restrictions for tobacco sales near schools. Can states adopt stricter rules?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 2,
        reasoning: "Both/Shared. Federal sets a floor using Commerce power; states may go stricter under 10th Amendment.",
        cites: [
          "Article I, Section 8 — Commerce Clause",
          "10th Amendment — Reserved Powers / Police Powers",
        ],
      },
      {
        prompt: "NIH research funding for opioids is cut at the federal level. Who controls whether research programs continue in a state?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 0,
        reasoning: "Federal controls NIH grants via Spending power; states may supplement with state funds, but federal cut is federal authority.",
        cites: ["Article I, Section 8 — Taxing & Spending (General Welfare)"],
      },
      {
        prompt: "A federal agency issues a new guideline that contradicts an existing state public‑health program. Who prevails?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 3,
        reasoning: "Depends. Guidance alone is nonbinding; rules tied to spending or statutes may preempt. Courts often decide preemption/authority boundaries.",
        cites: [
          "Article I, Section 8 — Necessary & Proper",
          "Article I, Section 8 — Taxing & Spending (General Welfare)",
          "10th Amendment — Reserved Powers / Police Powers",
        ],
      },
      {
        prompt: "A governor orders quarantine at the county level during an outbreak. Who grants this authority?",
        options: ["Federal", "State/Local", "Both/Shared", "Depends (court ruling)"],
        correct: 1,
        reasoning: "State/Local under police powers; locals often act via delegated authority from state statutes/regulations.",
        cites: ["10th Amendment — Reserved Powers / Police Powers"],
      }
    ];

    let currentIndex = 0;
    let teamA = "Team A";
    let teamB = "Team B";
    let scoreA = 0;
    let scoreB = 0;
    let turn = "A";
    let selected = null;
    let revealed = false;

    function $(id) { return document.getElementById(id); }

    function renderClauseRef() {
      const list = $("clauseList");
      list.innerHTML = "";
      CLAUSES.forEach(c => {
        const div = document.createElement("div");
        div.className = "clause-item";
        div.innerHTML = `<strong>${c.title}</strong><br><span>${c.meaning}</span>`;
        list.appendChild(div);
      });
    }

    function renderGame() {
      $("teamAname").innerText = teamA;
      $("teamBname").innerText = teamB;
      $("scoreA").innerText = scoreA;
      $("scoreB").innerText = scoreB;
      $("turnDisplay").innerText = turn === "A" ? teamA : teamB;
      $("cardNumber").innerText = currentIndex + 1;
      $("totalCards").innerText = SCENARIOS.length;
      const card = SCENARIOS[currentIndex];
      $("scenarioPrompt").innerText = card.prompt;
      const choicesDiv = $("choices");
      choicesDiv.innerHTML = "";
      card.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "choice-btn";
        btn.innerText = opt;
        btn.disabled = revealed;
        btn.onclick = () => { selected = i; updateChoiceButtons(); updateActionButtons(); };
        if (selected === i) btn.classList.add("selected");
        choicesDiv.appendChild(btn);
      });
      updateActionButtons();
      $("answer-explanation").innerHTML = revealed ? `
        <div>
          <div class="text-sm text-gray-600">Correct answer</div>
          <div style="font-weight:bold; margin-top:4px;">${card.options[card.correct]}</div>
          <div style="margin-top:7px;">${card.reasoning}</div>
          <div style="margin-top:7px; font-size:0.98em;">
            <span style="font-weight:500;">Constitutional hook:</span> ${card.cites.join(" • ")}
          </div>
        </div>
      ` : "";
      $("gameEnd").style.display = "none";
      $("scenario-card").style.display = "";
    }

    function updateChoiceButtons() {
      document.querySelectorAll(".choice-btn").forEach((btn, idx) => {
        btn.classList.toggle("selected", selected === idx);
      });
    }

    function updateActionButtons() {
      const actions = $("actionButtons");
      actions.innerHTML = "";
      if (!revealed) {
        const revealBtn = document.createElement("button");
        revealBtn.innerText = "Reveal Answer";
        revealBtn.disabled = (selected === null);
        revealBtn.onclick = handleReveal;
        actions.appendChild(revealBtn);
      } else {
        const correct = selected === SCENARIOS[currentIndex].correct;
        const verdict = document.createElement("span");
        verdict.innerText = correct ? "Correct" : "Incorrect";
        verdict.style = `padding:0.5em 1em; margin-right:1em; border-radius:6px; color:${correct ? "#0b6137" : "#a00"}; background:${correct ? "#d6f5e3" : "#fbe8e8"}; font-weight:600;`;
        actions.appendChild(verdict);
        const nextBtn = document.createElement("button");
        nextBtn.innerText = "Award & Next Card";
        nextBtn.onclick = () => handleMark(correct);
        actions.appendChild(nextBtn);
      }
    }

    function handleReveal() {
      revealed = true;
      renderGame();
    }

    function handleMark(correct) {
      if (correct) {
        if (turn === "A") scoreA++; else scoreB++;
      }
      turn = turn === "A" ? "B" : "A";
      selected = null;
      revealed = false;
      currentIndex++;
      if (currentIndex >= SCENARIOS.length) {
        showWinner();
      } else {
        renderGame();
      }
    }

    function showWinner() {
      $("scenario-card").style.display = "none";
      $("gameEnd").style.display = "";
      let winner;
      if (scoreA === scoreB) winner = "It's a tie!";
      else winner = scoreA > scoreB ? teamA : teamB;
      $("winnerText").innerText = "Winner: " + winner;
    }

    function restartGame() {
      currentIndex = 0;
      scoreA = 0;
      scoreB = 0;
      turn = "A";
      selected = null;
      revealed = false;
      renderGame();
    }

    renderClauseRef();
    renderGame();
  </script>
</body>
</html>
